### 14.1. Компоненты Kubernetes

---
 Задание. Необходимо определить требуемые ресурсы
Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

Необходимо упаковать приложение в чарт для деплоя в разные окружения.
База данных должна быть отказоустойчивой. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
Кеш должен быть отказоустойчивый. Потребляет 4 ГБ ОЗУ в работе, 1 ядро. 3 копии.
Фронтенд обрабатывает внешние запросы быстро, отдавая статику. Потребляет не более 50 МБ ОЗУ на каждый экземпляр, 0.2 ядра. 5 копий.
Бекенд потребляет 600 МБ ОЗУ и по 1 ядру на копию. 10 копий.

---

- Базовый набор для Contol и Worker нод:
    Control:    (2 ядра + 2 Гб ОЗУ) * 3 = 6 ядер и 6 Гб ОЗУ
    Worker:     (1 ядро + 1 Гб ОЗУ) * 3 = 3 ядра и 3 Гб ОЗУ
    Это без учета места на дисках (по 50 Гб на каждую контрол и по 100 Гб на каждый воркер)

- Для приложения:
    База данных:    (1 ядро + 4 Гб ОЗУ) * 3 = 3 ядра и 12 Гб ОЗУ
    Кеш:            (1 ядро + 4 Гб ОЗУ) * 3 = 3 ядра и 12 Гб ОЗУ
    Фронтенд:       (0,2 ядра + 0,05 Гб ОЗУ) * 5 = 1 ядро и 0,25 Гб ОЗУ
    Бекенд:         (1 ядро + б,6 Гб ОЗУ) * 10 = 10 ядер и 6 Гб ОЗУ


<table>
    <tr>
        <td>
        </td>
        <td>
            Ядра
        </td>
        <td>
            ОЗУ (Гб)
        </td>
    </tr>
    <tr>
        <td>
            БД
        </td>
        <td>
            3
        </td>
        <td>
            12
        </td>
    </tr>
    <tr>
        <td>
            Кеш
        </td>
        <td>
            3
        </td>
        <td>
            12
        </td>
    </tr>
    <tr>
        <td>
            Фронт
        </td>
        <td>
            1
        </td>
        <td>
            0,25
        </td>
    </tr>
    <tr>
        <td>
            Бек
        </td>
        <td>
            10
        </td>
        <td>
            6
        </td>
    </tr>
    <tr style="background:lightgrey">
        <td>
            Итого
        </td>
        <td>
            17
        </td>
        <td>
            30,25
        </td>
    </tr>
</table>

Потребуется добавить некоторый запас на случай выхода из строя одной ноды (примерно 1/3) от общего:
    23 ядра и 42 Гб ОЗУ - делим на три ноды - получаем ~8 ядер и 14 Гб ОЗУ только для приложений на каждой ноде.

Делаем вывод, что требуемые три worker node должны быть по 9 ядер и по 15 Гб ОЗУ, а также три ноды control по 2 ядра и 2 Гб ОЗУ.

Grand total: 33 CPU 51Gb RAM